# ğŸ“¡ libmodbus åº“æ–‡æ¡£ä¸­å¿ƒ

> **é«˜æ€§èƒ½ Modbus é€šä¿¡åº“** - åŸºäº libmodbus 3.1.1 çš„ Qt C++ å°è£…

![Version](https://img.shields.io/badge/Version-3.1.1-blue.svg) ![Qt](https://img.shields.io/badge/Qt-5.12+-green.svg) ![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)

---

## ğŸ“‹ æ–‡æ¡£ç›®å½•

| æ–‡æ¡£ | æè¿° | é€‚ç”¨å¯¹è±¡ |
|------|------|----------|
| [ğŸ“– å¿«é€Ÿå¼€å§‹æŒ‡å—](./quick_start_guide.md) | 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ Modbus é€šä¿¡ | åˆå­¦è€… |
| [ğŸ”§ API ä½¿ç”¨æ‰‹å†Œ](./libmodbus_api_manual_cn.md) | å®Œæ•´çš„ libmodbus C API æ–‡æ¡£ | å¼€å‘è€… |
| [âš™ï¸ ç®¡ç†å™¨ä½¿ç”¨æ‰‹å†Œ](./libmodbus_api_manage.md) | ModbusManager é«˜çº§å°è£…ä½¿ç”¨ | Qt å¼€å‘è€… |
| [ğŸ› æ•…éšœæ’é™¤æŒ‡å—](./troubleshooting_guide.md) | å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ | è¿ç»´äººå‘˜ |
| [ğŸ“Š æ€§èƒ½ä¼˜åŒ–æŒ‡å—](./performance_guide.md) | æ€§èƒ½è°ƒä¼˜æœ€ä½³å®è·µ | é«˜çº§å¼€å‘è€… |
| [ğŸ”Œ ç¡¬ä»¶é›†æˆæ‰‹å†Œ](./hardware_integration.md) | ä¸åŒè®¾å¤‡çš„è¿æ¥é…ç½® | å·¥ç¨‹å¸ˆ |
| [ğŸ“ åè®®è§„èŒƒè¯´æ˜](./protocol_specification.md) | Modbus åè®®è¯¦ç»†è§„èŒƒ | åè®®ä¸“å®¶ |
| [ğŸ§ª æµ‹è¯•ä¸éªŒè¯](./testing_guide.md) | å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯• | QA å·¥ç¨‹å¸ˆ |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬è¿æ¥ç¤ºä¾‹
```cpp
#include "modbusmanager.h"

// TCP è¿æ¥
ModbusManager modbus;
if (modbus.connectTCP("192.168.1.100", 502)) {
    modbus.setSlaveID(1);
    
    // è¯»å–ä¿æŒå¯„å­˜å™¨
    QVector<quint16> values;
    if (modbus.readHoldingRegisters(0, 10, values)) {
        qDebug() << "è¯»å–æˆåŠŸ:" << values;
    }
}
```

### RTU ä¸²å£è¿æ¥
```cpp
// RTU è¿æ¥
if (modbus.connectRTU("COM1", 9600)) {
    modbus.setSlaveID(1);
    
    // å†™å…¥å•ä¸ªå¯„å­˜å™¨
    modbus.writeSingleRegister(0, 1234);
}
```

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ¨ ä¸»è¦åŠŸèƒ½
- **ğŸ”— åŒåè®®æ”¯æŒ**: TCP/RTU å®Œæ•´å®ç°
- **ğŸ›¡ï¸ å¼‚å¸¸å¤„ç†**: å®Œå–„çš„é”™è¯¯æ£€æµ‹å’Œæ¢å¤æœºåˆ¶
- **âš¡ é«˜æ€§èƒ½**: å¼‚æ­¥æ“ä½œå’Œè¿æ¥æ± æ”¯æŒ
- **ğŸ”§ æ˜“äºé›†æˆ**: ç®€æ´çš„ Qt C++ API
- **ğŸ“Š å®æ—¶ç›‘æ§**: å†…ç½®è¯Šæ–­å’ŒçŠ¶æ€ç›‘æ§
- **ğŸ¨ çµæ´»é…ç½®**: ä¸°å¯Œçš„å‚æ•°é…ç½®é€‰é¡¹

### ğŸ—ï¸ æ¶æ„è®¾è®¡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åº”ç”¨å±‚ (Application)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     ModbusManager (Qt C++ å°è£…)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       libmodbus æ ¸å¿ƒåº“ (C)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    TCP Socket / Serial Port        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“š æ”¯æŒçš„åŠŸèƒ½ç 

| åŠŸèƒ½ç  | åŠŸèƒ½åç§° | æ“ä½œç±»å‹ | æ•°æ®ç±»å‹ |
|--------|----------|----------|----------|
| 01 | Read Coils | è¯»å– | çº¿åœˆçŠ¶æ€ (bool) |
| 02 | Read Discrete Inputs | è¯»å– | ç¦»æ•£è¾“å…¥ (bool) |
| 03 | Read Holding Registers | è¯»å– | ä¿æŒå¯„å­˜å™¨ (uint16) |
| 04 | Read Input Registers | è¯»å– | è¾“å…¥å¯„å­˜å™¨ (uint16) |
| 05 | Write Single Coil | å†™å…¥ | å•ä¸ªçº¿åœˆ (bool) |
| 06 | Write Single Register | å†™å…¥ | å•ä¸ªå¯„å­˜å™¨ (uint16) |
| 15 | Write Multiple Coils | å†™å…¥ | å¤šä¸ªçº¿åœˆ (bool[]) |
| 16 | Write Multiple Registers | å†™å…¥ | å¤šä¸ªå¯„å­˜å™¨ (uint16[]) |
| 22 | Mask Write Register | å†™å…¥ | æ©ç å†™å¯„å­˜å™¨ |
| 23 | Read/Write Multiple Registers | è¯»å†™ | æ‰¹é‡è¯»å†™å¯„å­˜å™¨ |

---

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 7/8/10/11
- **ç¼–è¯‘å™¨**: MSVC 2017+ / MinGW 7.3+
- **Qt ç‰ˆæœ¬**: 5.12 æˆ–æ›´é«˜
- **CMake**: 3.16 æˆ–æ›´é«˜

### ä¾èµ–åº“
- **libmodbus**: 3.1.1 (å·²åŒ…å«)
- **Qt Core**: æ ¸å¿ƒæ¨¡å—
- **Qt Network**: TCP é€šä¿¡
- **Qt SerialPort**: ä¸²å£é€šä¿¡

---

## ğŸ“¦ å®‰è£…é…ç½®

### 1. CMake é›†æˆ
```cmake
# åœ¨æ‚¨çš„ CMakeLists.txt ä¸­æ·»åŠ 
find_package(Qt5 REQUIRED COMPONENTS Core Network SerialPort)

# æ·»åŠ  libmodbus åŒ…å«ç›®å½•
include_directories(thirdparty/libmodbus/inc)

# é“¾æ¥åº“
target_link_libraries(your_target
    Qt5::Core
    Qt5::Network
    Qt5::SerialPort
    ${CMAKE_CURRENT_SOURCE_DIR}/thirdparty/libmodbus/libmodbus64/modbus.lib
)
```

### 2. è¿è¡Œæ—¶é…ç½®
ç¡®ä¿ä»¥ä¸‹ DLL æ–‡ä»¶åœ¨å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼š
- `modbus.dll` (Modbus æ ¸å¿ƒåº“)
- `modbusd.dll` (è°ƒè¯•ç‰ˆæœ¬)

---

## ğŸ·ï¸ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | å‘å¸ƒæ—¥æœŸ | ä¸»è¦æ›´æ–° |
|------|----------|----------|
| 3.1.1 | 2024-12-01 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŸºç¡€åŠŸèƒ½å®Œå–„ |
| 3.1.2 | è®¡åˆ’ä¸­ | æ€§èƒ½ä¼˜åŒ–ï¼Œå¢å¼ºè¯Šæ–­åŠŸèƒ½ |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æŠ¥å‘Šé—®é¢˜
- ä½¿ç”¨ [GitHub Issues](../../issues) æŠ¥å‘Š Bug
- æä¾›è¯¦ç»†çš„é‡ç°æ­¥éª¤å’Œç¯å¢ƒä¿¡æ¯
- åŒ…å«ç›¸å…³çš„æ—¥å¿—è¾“å‡º

### æäº¤ä»£ç 
1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **æ–‡æ¡£é—®é¢˜**: æŸ¥çœ‹ [FAQ](./troubleshooting_guide.md#faq)
- **ä½¿ç”¨æ•™ç¨‹**: å‚è€ƒ [ç¤ºä¾‹ä»£ç ](../examples/)
- **API å‚è€ƒ**: æŸ¥é˜… [API æ–‡æ¡£](./libmodbus_api_manage.md)

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [LGPL v2.1](../LICENSE) è®¸å¯è¯å‘å¸ƒã€‚

---

<div align="center">

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼**

[â¬†ï¸ å›åˆ°é¡¶éƒ¨](#-libmodbus-åº“æ–‡æ¡£ä¸­å¿ƒ)

</div>
